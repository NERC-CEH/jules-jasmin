<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:py="http://genshi.edgewall.org/">
<xi:include href="../layout.html" />
<head>
    <title>Create Model Run | Select Driving Data</title>
    <link rel="stylesheet" type="text/css" href="../layout/joj.css"/>
    <link rel="stylesheet" type="text/css" href="../layout/model_run_driving_data.css"/>
    <script src="../js/model_run_driving_data.js"></script>
</head>
<body id="create">
<h1>Select Driving Data</h1>
<p>Choose a set of meteorological data for JULES to use as input for this model run.</p>

<form class="form-horizontal" method="POST" action="${url(controller='model_run', action='driving_data')}" enctype="multipart/form-data">

        <table class="driving-data">
            <tr>
                <th></th>
                <th></th>
                <th>Geographic Region</th>
                <th>Spatial Resolution</th>
                <th>Temporal Resolution</th>
                <th>Start / End Date</th>
            </tr>

            <py:for each="driving_dataset in c.driving_datasets">
                <tr class="driving-data" dsid="${driving_dataset.id}">
                    <td class="select">
                        <input id="driving_dataset_${driving_dataset.id}" name="driving_dataset" type="radio"
                               value="${driving_dataset.id}" style="display:none" py:attrs="{'user_upload' : 'true'} if driving_dataset.id == c.user_upload_ds_id else {}"/>
                        <i dsid="${driving_dataset.id}" class="fa fa-check-circle-o fa-2x select-icon"></i>
                    </td>
                    <td class="name"><h4>${driving_dataset.name}</h4><p class="description">${driving_dataset.description}</p></td>
                    <py:choose>
                        <py:when test="driving_dataset.id == c.user_upload_ds_id">
                            <td class="geog">-</td>
                            <td class="spat-res">-</td>
                            <td class="temp-res">-</td>
                            <td class="date">-</td>
                        </py:when>
                        <py:otherwise>
                            <td class="geog">${driving_dataset.geographic_region}</td>
                            <td class="spat-res">${driving_dataset.spatial_resolution}</td>
                            <td class="temp-res">${driving_dataset.temporal_resolution}</td>
                            <td class="date">${driving_dataset.time_start.date()}<p style="margin:0"><small>to</small></p>${driving_dataset.time_end.date()}</td>
                        </py:otherwise>
                    </py:choose>
                </tr>
            </py:for>
        </table>

    <div id="upload-input">
    Lat
    ${h.html_tags.text('lat', style='width:80px')}<br/><br/>
    Lon
    ${h.html_tags.text('lon', style='width:80px')}<br/><br/>
    Start
    ${h.html_tags.text('dt_start', style='width:150px', placeholder='YYYY-MM-DD HH:MM')}<br/><br/>
    End
    ${h.html_tags.text('dt_end', style='width:150px', placeholder='YYYY-MM-DD HH:MM')}<br/><br/>
    Driving Data File
    ${h.html_tags.file('driving-file')}<br/><br/>

        <input type="submit" name="submit" value="Download"/>
        <input type="submit" name="submit" value="Upload"/>
        <p py:if="c.driving_data_rows">${c.driving_data_rows} rows of driving data currently uploaded</p>
</div>

    <div class="controls">
        <input type="submit" class="btn btn-primary btn-large pull-right control-group" name="submit" value="Next" />
        <input type="submit" class="btn btn-primary btn-large pull-left control-group" name="submit" value="Previous" />
    </div>
</form>

<div class="modal fade hide" id="dataset-preview"></div>

<script>

</script>
</body>
</html>
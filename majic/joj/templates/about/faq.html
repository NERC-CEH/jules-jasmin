<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

<xi:include href="../layout.html" />
<head>
    <title>Frequently Asked Questions</title>
    <script type="text/javascript" src="/js/faq.js"></script>
    <link href="/layout/faq.css" rel="stylesheet" media="screen" />
</head>
<body id="help">
    <h1>Frequently Asked Questions</h1>
    <p>Here are some of the most commonly asked questions about Majic:</p>
    <div id="links"></div>
    <p>Got a question that isn't answered here? Email <a href="mailto:${c.admin_email}">${c.admin_email}</a> for help.</p>
    <!--!TO ADD TO THESE FAQS:
        1) Add a div of class 'qa'. <div class='qa'></div>
        2) Add an anchor inside that with a unique ID. <a id="unqiue_id" class="anchor"></a>
        3) Put the text inside <p></p> in that div.
        4) The list of questions at top of page (with links) will be auto-generated.
    -->
    <div class="qa">
        <a id="q_upload_dd_period" class="anchor"></a>
        <p class="q"><b>When uploading driving data I get the error 'Period must be a multiple of 30 mins'. Why is this?</b></p>
        <p class="a">
            MAJIC runs JULES using a timestep of 30 minutes, so any uploaded driving data needs to have a time duration between values
            which synchronises with this. Any multiple of the timestep is acceptable. If you thought your uploaded file had a
            period which was valid, double check the start and end datetimes are correct and that the number of lines in the
            file is what you would expect for those times.
        </p>
    </div>

    <div class="qa">
        <a id="q_download_multi_years" class="anchor"></a>
        <p class="q"><b>Is there an easy way to download daily and hourly output datasets for all years?</b></p>
        <p class="a">Except for single-cell sites, downloading daily and hourly output is restricted to one calendar year at a time.
        This is because the NetCDF files involved become very large.
        However, if you want to write an automated script to do this for you, you can just do the following:
            <ol>
        <li>Find the URL of the dataset you want to download (right-click -> copy URL on the 'download' link).</li>
        <li>Change the year parameter in the URL to match the desired year to download.</li>
        <li>Make a HTTP POST request to that URL and pass in as POST parameters your username and password.</li>
    </ol>
       In Python it might look something like this:</p>
        <p><code class="block">import urllib<br/>
                 import urllib2<br/>
                    <br/>
        output_file_template = "majic_output_{year}.dat"<br/>
        login_data = urllib.urlencode({'login': 'my.username', 'password': 'mypassword123'})<br/>
        url_template = "https://majic.ceh.ac.uk/dataset/download?model_run_id=77&amp;output=25&amp;period=Monthly&amp;year={year}&amp;format=ASCII"<br/>
        <br/>
            for year in range(1901, 2001):<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;url = url_template.format(year=str(year))<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;request = urllib2.urlopen(url, login_data)<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;out_file_path = output_file_template.format(year=str(year))<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;with open(out_file_path, 'w') as out_file:<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for line in request.readlines():<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out_file.write(line)
    </code></p>Or, using WGET:
        <p><code class="block">
for year in `seq 1901 2001`<br/>
do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;url_template=https://majic.ceh.ac.uk/dataset/download?model_run_id=77&amp;output=25&amp;period=Monthly&amp;year=$$year&amp;format=ASCII<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Wget –post=”username=my.username&amp;password=mypassword123” $$url_template<br/>
done<br/>
</code></p>

    </div>

</body>
</html>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

<xi:include href="../layout.html" />
<head>
    <title>Frequently Asked Questions</title>
    <script type="text/javascript" src="/js/faq.js"></script>
    <link href="/layout/faq.css" rel="stylesheet" media="screen" />
</head>
<body id="help">
    <h1>Frequently Asked Questions</h1>
    <p>Here are some of the most commonly asked questions about Majic:</p>
    <div id="links"></div>
    <p>Got a question that isn't answered here? Email <a href="mailto:${c.admin_email}">${c.admin_email}</a> for help.</p>
    <!--!TO ADD TO THESE FAQS:
        1) Add a div of class 'qa'. <div class='qa'></div>
        2) Add an anchor inside that with a unique ID. <a id="unqiue_id" class="anchor"></a>
        3) Put the text inside <p></p> in that div.
        4) The list of questions at top of page (with links) will be auto-generated.
    -->
    <div class="qa">
        <a id="q_upload_dd_period" class="anchor"></a>
        <p class="q"><b>When uploading driving data I get the error 'Period must be a multiple of 30 mins'. Why is this?</b></p>
        <p class="a">
            Majic runs JULES using a timestep of 30 minutes, so any uploaded driving data needs to have a time duration between values
            which synchronises with this. Any multiple of the timestep is acceptable. If you thought your uploaded file had a
            period which was valid, double check the start and end datetimes are correct and that the number of lines in the
            file is what you would expect for those times.
        </p>
    </div>

    <div class="qa">
        <a id="q_output_yearly_monthly" class="anchor"></a>
        <p class="q"><b>Why are yearly or monthly outputs not available for my run?</b></p>
        <p class="a">
            JULES calculates yearly output at the start of January the 1st, and monthly output at the start of the 1st
            day of the month. If your run doesn't include any of these times then that output period will not be available -
            e.g. if your run starts January 2nd 1990 and finishes December 31st 1990, you won't be able to choose a yearly
            output period.
        </p>
    </div>

    <div class="qa">
        <a id="q_download_multi_years" class="anchor"></a>
        <p class="q"><b>Is there an easy way to download daily and hourly output datasets for all years?</b></p>
        <p class="a">Except for single-cell sites, downloading daily and hourly output is restricted to one calendar year at a time.
        This is because the NetCDF files involved become very large.
        However, if you want to write an automated script to do this for you, you can just do the following:
            <ol>
        <li>Find the URL of the dataset you want to download (right-click -> copy URL on the 'download' link).</li>
        <li>Change the year parameter in the URL to match the desired year to download.</li>
        <li>Make a HTTP POST request to that URL and pass in as POST parameters your username and password.</li>
    </ol>
       In Python it might look something like this:</p>
        <p><code class="block">import urllib<br/>
                 import urllib2<br/>
                    <br/>
        output_file_template = "majic_output_{year}.dat"<br/>
        login_data = urllib.urlencode({'login': 'my.username', 'password': 'mypassword123'})<br/>
        url_template = "https://majic.ceh.ac.uk/dataset/download?model_run_id=77&amp;output=25&amp;period=Monthly&amp;year={year}&amp;format=ASCII"<br/>
        <br/>
            for year in range(1901, 2001):<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;url = url_template.format(year=str(year))<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;request = urllib2.urlopen(url, login_data)<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;out_file_path = output_file_template.format(year=str(year))<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;with open(out_file_path, 'w') as out_file:<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for line in request.readlines():<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out_file.write(line)
    </code></p>Or, using WGET:
        <p><code class="block">
        for year in `seq 1901 2001`<br/>
        do<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;url_template=https://majic.ceh.ac.uk/dataset/download?model_run_id=77&amp;output=25&amp;period=Monthly&amp;year=$$year&amp;format=ASCII<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;Wget –post=”username=my.username&amp;password=mypassword123” $$url_template<br/>
        done<br/>
        </code></p>
    </div>

    <div class="qa">
        <a id="q_statuses" class="anchor"></a>
        <p class="q"><b>What are the different run statuses and what do they mean?</b></p>
        <p class="a">
            Once they have been created, Majic model runs will pass through the following stages in this order:
            <!--<ul style="list-style-type:none">-->
        <ol>
                <li><b style="color:#f6b26b">Submitted</b> - The run has been submitted but has not yet been queued.</li>
                <li><b style="color:#f6b26b">Pending</b> - The model run is in the JASMIN queue waiting for an available slot.</li>
                <li><b style="color:#f6b26b">Running</b> - JULES is currently performing the run.</li>
                <li><b style="color:#38761d">Completed</b> - The run successfully completed.</li>
                <li><b style="color:#711780">Published</b> - A completed run has been made publicly available (optional).</li>
        </ol>
        <p>If a problem occurs, the model run may reach one of the following statuses:</p>
        <ul>
                <li><b style="color:#990000">Submission Failed</b> - The run could not be submitted to JASMIN.
                    You may wish to try again later (you can always duplicate a failed run).</li>
                <li><b style="color:#990000">Failed</b> - JULES encountered an error whilst trying to perfom the run.
                    This may be a problem with how your run is configured - the summary page for this run will give more
                specific information.</li>
                <li><b style="color:#990000">Unknown</b> - An unknown error occurred and Majic doesn't know the status of the run.</li>
            </ul>
        </p>
    </div>



</body>
</html>